{% extends "layout.html" %}
{% block body %}
<link rel="stylesheet" href="{{static_url('starter-template.css')}}" crossorigin="anonymous">
<link rel="stylesheet" href="{{static_url('bubble.css')}}" crossorigin="anonymous">
<nav class="navbar navbar-expand-md navbar-dark bg-dark fixed-top">
  <a class="navbar-brand" href="/">wukong-robot</a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault" aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse" id="navbarsExampleDefault">
    <ul class="navbar-nav mr-auto">
      <li class="nav-item active">
        <a class="nav-link" href="/">会话</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/config">配置</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/log">日志</a>
      </li>
    </ul>
  </div>
</nav>
<div class="jumbotron">
  <h1 class="display-4"><i class="fas fa-robot"></i> wukong-robot</h1>
  <p class="lead">wukong-robot 是一个简单灵活的中文语音对话机器人。</p>
</div>


<div class="container history">
  {% if not history or len(history) == 0 %}
  <center>
    <p> 无聊天记录，请先和 wukong-robot 聊会天吧~ </p>
  </center>
  {% else %}
      {% for h in history %}
          {% if h['type'] == 0 %}
              <div class="right">
                 <div class="bubble-green">
                   <div class="bubble-avatar"><i class="fas fa-user"></i></div>
                   <p style="text-align: left" id="{{ h['uuid'] }}">{{ h['text'] }}</p>
                 </div>
              </div>
          {% else %}
              <div class="left">
                <div class="bubble-white">
                  <div class="bubble-avatar"><i class="fas fa-robot"></i></div>
                  <p style="text-align: left" id="{{ h['uuid'] }}">{{ h['text'] }}</p>
                </div>
              </div>
          {% end %}
      {% end %}
  {% end %}
</div>

<br/>

<div class="container">
  <center>
<form class="form-row">
    <label for="query" class="col-sm-2 col-form-label col-form-label-lg">说句话：</label>
    <div class="col-7">
      <input type="text" class="form-control" name="query" id="query" placeholder="现在几点？" required autofocus>    </div>
    &nbsp;
    <button type="submit" class="btn btn-primary mb-2">发送</button>&nbsp;
</form>
</center>
</div>

<br/>
<center>
  <span class="mt-5 mb-3 text-muted">wukong-robot &copy; 2019 </span>
</center>


<ul id="menu" class="mfb-component--br mfb-zoomin" data-mfb-toggle="hover">
      <li class="mfb-component__wrap">
        <a href="#" class="mfb-component__button--main">
          <i class="mfb-component__main-icon--resting fa fa-microphone"></i>
          <i class="mfb-component__main-icon--active fa fa-times"></i>
        </a>
        <ul class="mfb-component__list">
          <!-- <\!-- <li> -\-> -->
          <!--   <\!-- todo: 支持麦克风静音 -\-> -->
          <!--   <\!-- <a href="#" data-mfb-label="麦克风静音" class="mfb-component__button--child"> -\-> -->
          <!--   <\!--   <i class="mfb-component__child-icon fa fa-microphone-slash" aria-hidden="true"></i> -\-> -->
          <!--   <\!-- </a> -\-> -->
          </li>
          <li>
            <a href="#" data-mfb-label="说一段15秒的命令" class="mfb-component__button--child">
              <span class="mfb-component__child-icon">15s</span>
            </a>
          </li>
          <li>
            <a href="#" data-mfb-label="说一段10秒的命令" class="mfb-component__button--child">
              <span class="mfb-component__child-icon">10s</span>
            </a>
          </li>

          <li>
            <a href="#" data-mfb-label="说一段5秒的命令" class="mfb-component__button--child">
              <span class="mfb-component__child-icon">5s</span>
            </a>
          </li>
        </ul>
      </li>
    </ul>


<script src="{{static_url('main.js')}}" crossorigin="anonymous"></script>
<script src="{{static_url('index.js')}}" crossorigin="anonymous"></script>
{% end %}
